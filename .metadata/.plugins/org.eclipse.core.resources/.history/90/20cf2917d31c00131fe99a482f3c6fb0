package com.example.mymapapp;

import com.example.mymapapp.R;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnCameraChangeListener;
import com.google.android.gms.maps.GoogleMap.OnInfoWindowClickListener;
import com.google.android.gms.maps.GoogleMap.OnMapClickListener;
import com.google.android.gms.maps.GoogleMap.OnMapLongClickListener;
import com.google.android.gms.maps.GoogleMap.OnMarkerClickListener;
import com.google.android.gms.maps.GoogleMap.OnMarkerDragListener;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.CameraPosition;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap.InfoWindowAdapter;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.widget.TextView;


public class MainActivity extends FragmentActivity
implements OnMarkerClickListener,OnInfoWindowClickListener, OnMarkerDragListener
,OnMapClickListener, OnMapLongClickListener, OnCameraChangeListener {

private GoogleMap mMap;
//private TextView mTapTextView;
private TextView mCameraTextView;
private static final LatLng BRISBANE = new LatLng(0, 0);
private TextView mTopText;



@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

//mTapTextView = (TextView) findViewById(R.id.tap_text);
mCameraTextView = (TextView) findViewById(R.id.camera_text);
mTopText = (TextView) findViewById(R.id.tap_text);


setUpMapIfNeeded();
}

@Override
protected void onResume() {
super.onResume();
setUpMapIfNeeded();
}

private void setUpMapIfNeeded() {
if (mMap == null) {
    mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
            .getMap();
    if (mMap != null) {
        setUpMap();
    }
}
}

private void setUpMap() {
mMap.setOnMapClickListener(this);
mMap.setOnMapLongClickListener(this);
mMap.setOnCameraChangeListener(this);
mMap.setMyLocationEnabled(true); //shows the location button and enables it
mMap.addMarker(new MarkerOptions()
.position(BRISBANE)
.title("Brisbane")
.snippet("Population: 2,074,200")
.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN))
.draggable(true));
}

@Override
public void onMapClick(LatLng point) {
//mTapTextView.setText("tapped, point=" + point);

}

@Override
public void onMapLongClick(LatLng point) {
//mTapTextView.setText("long pressed, point=" + point);
}

@Override
public void onCameraChange(final CameraPosition position) {
mCameraTextView.setText(position.toString());
}
@Override
public void onMarkerDrag(Marker marker) {
    mTopText.setText("onMarkerDrag.  Current Position: " + marker.getPosition());
}

@Override
public void onMarkerDragEnd(Marker arg0) {
	// TODO Auto-generated method stub
	
}

@Override
public void onMarkerDragStart(Marker arg0) {
	// TODO Auto-generated method stub
	
}

@Override
public void onInfoWindowClick(Marker arg0) {
	// TODO Auto-generated method stub
	
}

@Override
public boolean onMarkerClick(Marker arg0) {
	// TODO Auto-generated method stub
	return false;
}
}
